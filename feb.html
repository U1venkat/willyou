<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ· A Gentleman's Confession</title>

<style>
body{
margin:0;
background:linear-gradient(#0b1d2a,#1a2f45,#3c2f2f);
font-family:serif;
color:#ffd700;
overflow:hidden;
text-align:center;
padding:20px;
}

/* cinematic fade */
.screen{
position:absolute;
width:100%;
height:100%;
top:0;
left:0;
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
animation:fade 2s;
padding:20px;
box-sizing:border-box;
}

@keyframes fade{
from{opacity:0;transform:scale(1.1);}
to{opacity:1;transform:scale(1);}
}

.hidden{display:none !important;}

button{
padding:12px 25px;
background:#ffd700;
border:none;
border-radius:12px;
margin:10px;
font-size:18px;
cursor:pointer;
color:#0b1d2a;
font-weight:bold;
transition:transform 0.3s;
}

button:hover{
transform:scale(1.05);
}

button:active{
transform:scale(0.95);
}

.quote{
font-size:clamp(18px, 4vw, 24px);
max-width:700px;
line-height:1.6;
animation:type 4s steps(60);
white-space:normal;
padding:20px;
}

@keyframes type{
from{opacity:0;}
to{opacity:1;}
}

/* romantic petals */
.petal{
position:fixed;
font-size:20px;
animation:fall linear infinite;
pointer-events:none;
z-index:1;
}

@keyframes fall{
0%{transform:translateY(-10vh) rotate(0deg);}
100%{transform:translateY(110vh) rotate(360deg);}
}

canvas{
position:fixed;
top:0;
left:0;
z-index:0;
pointer-events:none;
}

#count{
font-size:32px;
margin:20px;
font-weight:bold;
}

.ingredient{
position:fixed;
font-size:30px;
cursor:pointer;
transition:transform 0.2s;
z-index:10;
user-select:none;
}

.ingredient:hover{
transform:scale(1.2);
}

h1{
font-size:clamp(24px, 6vw, 48px);
margin-bottom:20px;
}

h2{
font-size:clamp(20px, 5vw, 36px);
margin-bottom:15px;
}

p{
font-size:clamp(16px, 3vw, 20px);
}

/* Mobile optimization */
@media (max-width: 768px) {
button{
font-size:16px;
padding:10px 20px;
}
}
</style>
</head>

<body>

<canvas id="fireworks"></canvas>

<div id="intro" class="screen">
<h1>ğŸ· Welcome to My Heart's Restaurant</h1>
<p>Tonightâ€¦ a gentleman chef confesses his love</p>
<button onclick="start()">Start Episode â–¶</button>
</div>

<div id="miniGame" class="screen hidden">
<h2>ğŸ³ Cook the Love</h2>
<p>Click 4 ingredients ğŸ’›</p>
<div id="count">0 / 4</div>
</div>

<div id="confession" class="screen hidden">
<h1>ğŸ’› My Princess</h1>
<div class="quote">
"In a world full of oceans and adventuresâ€¦  
my heart chooses only you.  
Like a gentleman chefâ€¦  
every dish I make carries your smile."
</div>
<button onclick="voice()">ğŸ¤ Hear My Confession</button>
<button onclick="letter()">ğŸ’Œ Open Love Letter</button>
</div>

<div id="proposal" class="screen hidden">
<h1>ğŸ’ Will You Sail Life With Me Forever?</h1>
<div style="position:relative; width:100%; height:150px;">
<button onclick="yes()" style="position:relative; z-index:5;">YES ğŸ’›</button>
<button id="noBtn" onmouseover="runAway(event)" ontouchstart="runAway(event)" onclick="tryNo()" style="background:#999; color:#fff; position:absolute;">No</button>
</div>
<p style="margin-top:30px; font-size:24px;">ğŸ’› Forever Together ğŸ’›</p>
</div>

<script>

/* petals effect */
setInterval(()=>{
let p=document.createElement("div");
p.className="petal";
p.innerText="ğŸŒ¹";
p.style.left=Math.random()*100+"%";
p.style.animationDuration=(Math.random()*5+5)+"s";
document.body.appendChild(p);
setTimeout(()=>p.remove(),10000);
},400);

/* intro -> game */
function start(){
document.getElementById('intro').classList.add("hidden");
document.getElementById('miniGame').classList.remove("hidden");
spawnIngredient();
}

/* mini cooking game */
let score=0;
let spawnInterval;
let ingredients=[];

function spawnIngredient(){
if(score>=4) return; // Stop spawning after game complete
  
let h=document.createElement("div");
h.className="ingredient";
h.innerText=["ğŸ“","ğŸ¥•","ğŸ…","ğŸ¥‘","ğŸŒ½","ğŸ†"][Math.floor(Math.random()*6)];
h.style.left=Math.random()*80+10+"%"; // Keep away from edges
h.style.top=Math.random()*70+15+"%";

h.onclick=()=>{
score++;
document.getElementById('count').innerText=score+" / 4";
h.remove();
ingredients=ingredients.filter(item=>item!==h);

if(score>=4){
clearInterval(spawnInterval);
// Remove all remaining ingredients
ingredients.forEach(ing=>ing.remove());
ingredients=[];
setTimeout(()=>{
document.getElementById('miniGame').classList.add("hidden");
document.getElementById('confession').classList.remove("hidden");
},500);
}else{
spawnIngredient(); // Spawn next ingredient
}
};

document.body.appendChild(h);
ingredients.push(h);

// Auto-remove after 3 seconds
setTimeout(()=>{
if(document.body.contains(h)){
h.remove();
ingredients=ingredients.filter(item=>item!==h);
}
},3000);
}

// Spawn ingredients every 700ms
spawnInterval = setInterval(()=>{
if(score<4 && ingredients.length<3){ // Max 3 ingredients at once
spawnIngredient();
}
},700);

/* voice confession */
function voice(){
if('speechSynthesis' in window){
let speech=new SpeechSynthesisUtterance(
"My love... like a true gentleman, my heart belongs only to you. Will you stay by my side forever?"
);
speech.rate=0.9;
speech.pitch=0.9;
speechSynthesis.speak(speech);
}else{
alert("Voice not supported on this device, but my heart speaks loudly: I love you!");
}
}

/* love letter */
function letter(){
alert("My dearest... you are the calm to my storms, the light to my sea. Forever yours ğŸ’›");
document.getElementById('confession').classList.add("hidden");
document.getElementById('proposal').classList.remove("hidden");
}

/* fireworks */
let canvas=document.getElementById("fireworks");
let ctx=canvas.getContext("2d");
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

// Resize canvas on window resize
window.addEventListener('resize',()=>{
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;
});

let parts=[];
let fireworksActive=false;

function yes(){
fireworksActive=true;
// Create multiple bursts
for(let burst=0; burst<5; burst++){
setTimeout(()=>{
for(let i=0;i<80;i++){
parts.push({
x:canvas.width/2,
y:canvas.height/2,
vx:(Math.random()-0.5)*8,
vy:(Math.random()-0.5)*8,
life:100,
color:['gold','#ffd700','#ffed4e','#ff69b4','#ff1493'][Math.floor(Math.random()*5)]
});
}
},burst*300);
}

// Show final message
setTimeout(()=>{
alert("ğŸ’› You've made me the happiest gentleman in the world! Forever yours! ğŸ’›");
},2000);
}

let noAttempts=0;
function runAway(event){
if(event){
event.preventDefault();
}

const noBtn=document.getElementById('noBtn');
const proposalScreen=document.getElementById('proposal');

// Get viewport dimensions
const viewportWidth=window.innerWidth;
const viewportHeight=window.innerHeight;

// Random position
const randomX=Math.random()*(viewportWidth-150)+20;
const randomY=Math.random()*(viewportHeight-200)+100;

noBtn.style.left=randomX+'px';
noBtn.style.top=randomY+'px';

noAttempts++;

// Change button text based on attempts
if(noAttempts===3){
noBtn.textContent='No??';
noBtn.style.fontSize='16px';
}else if(noAttempts===5){
noBtn.textContent='Still No?';
noBtn.style.fontSize='14px';
}else if(noAttempts===8){
noBtn.textContent='Really??';
noBtn.style.fontSize='12px';
noBtn.style.padding='8px 15px';
}else if(noAttempts===12){
noBtn.textContent='ğŸ¥º';
noBtn.style.fontSize='20px';
}
}

function tryNo(){
const messages=[
"A gentleman never accepts 'No' for an answer! ğŸ’›",
"The 'No' button is broken... just like I'd be without you! ğŸ’”",
"My heart only understands 'Yes'! ğŸ·",
"You can't say no to destiny! ğŸ’"
];
alert(messages[Math.floor(Math.random()*messages.length)]);

// Vibrate on mobile
if('vibrate' in navigator){
navigator.vibrate(100);
}
}

function loop(){
requestAnimationFrame(loop);
ctx.fillStyle="rgba(11,29,42,0.15)"; // Fade effect
ctx.fillRect(0,0,canvas.width,canvas.height);
parts.forEach(p=>{
p.x+=p.vx;
p.y+=p.vy;
p.vy+=0.1; // Gravity
p.life--;
ctx.fillStyle=p.color;
ctx.beginPath();
ctx.arc(p.x,p.y,2,0,Math.PI*2);
ctx.fill();
});
parts=parts.filter(p=>p.life>0);
}
loop();

</script>

</body>
</html>